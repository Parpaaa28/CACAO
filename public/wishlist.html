<!doctype html>
<html>
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@400;500;600;700&display=swap" rel="stylesheet">
  <title>Wishlist</title>
  <style>
    :root{
      --bg:#ffffff;
      --panel:#ffffff;
      --accent:#6c584c;
      --accent-2:#6c584c;
      --text:#111111;
      --border:#6c584c;
      --white:#ffffff;
    }
    body{font-family:'Montserrat',Segoe UI,Tahoma,sans-serif;margin:0;color:var(--text);background:var(--bg)}
    header.top{position:sticky;top:0;z-index:50;display:flex;align-items:center;justify-content:space-between;gap:10px;flex-wrap:wrap;background:var(--panel);padding:12px 16px;border-bottom:1px solid var(--border)}
    .brand{font-size:20px;font-weight:700;letter-spacing:.5px}
    .page{max-width:1100px;margin:0 auto;padding:18px}
        .nav a,.nav button{margin-right:8px;text-decoration:none;color:var(--text);padding:6px 10px;border:1px solid var(--border);border-radius:8px;background:var(--panel);cursor:pointer;display:inline-flex;align-items:center;gap:8px;transition:background-color .2s ease,color .2s ease,border-color .2s ease,transform .2s ease}
.icon{width:32px;height:32px;overflow:visible}
    .icon path,.icon circle,.icon rect{stroke:var(--text);fill:none;stroke-width:2;stroke-linecap:round;stroke-linejoin:round}
    .pill{display:inline-block;padding:6px 10px;border:1px solid var(--border);border-radius:8px;background:var(--panel)}
    .wishlist-grid{display:grid;grid-template-columns:repeat(auto-fit,minmax(280px,1fr));gap:16px}
    .wish-card{background:var(--white);border:1px solid var(--border);border-radius:18px;padding:18px;box-shadow:0 12px 24px rgba(108,88,76,.10);display:flex;flex-direction:column;gap:12px}
    .wish-body{display:grid;grid-template-columns:1.2fr .8fr;gap:16px;align-items:center}
    .wish-title{font-size:20px;font-weight:700;line-height:1.2}
    .wish-meta{font-size:12px;color:var(--accent-2);margin-top:4px;display:flex;align-items:center;gap:6px}
    .wish-stars{font-size:14px;color:#9a9a9a}
    .wish-score{font-size:12px;color:#9a9a9a}
    .wish-desc{margin-top:8px;color:#6c584c;font-size:14px}
    .wish-price{margin-top:10px;font-size:22px;font-weight:800;color:#3d2f28}
    .wish-media{display:flex;align-items:center;justify-content:center;background:var(--panel);border:1px solid var(--border);border-radius:14px;padding:12px;min-height:220px}
    .wish-media img{width:100%;max-width:220px;height:auto;object-fit:contain;display:block}
    .wish-actions{display:flex;gap:10px;flex-wrap:wrap;margin-top:12px}
    .wish-compare{display:flex;align-items:center;gap:8px;font-size:13px;color:#6c584c}
    .compare-panel{margin-top:24px;background:var(--white);border:1px solid var(--border);border-radius:0;padding:16px}
    .compare-title{font-weight:700;margin-bottom:10px;letter-spacing:.06em;text-transform:uppercase;font-size:13px}
    .compare-note{font-size:12px;color:var(--accent-2);margin-bottom:10px}
    .compare-grid{display:grid;grid-template-columns:repeat(auto-fit,minmax(200px,1fr));gap:12px}
    .compare-card{border:1px solid var(--border);border-radius:0;padding:12px;background:var(--white)}
    .compare-name{font-weight:600;font-size:14px}
    .compare-price{font-weight:700;margin-top:4px}
    .compare-meta{display:flex;flex-wrap:wrap;gap:6px;font-size:11px;color:var(--accent-2);text-transform:uppercase;letter-spacing:.08em;margin-top:6px}
    .compare-desc{font-size:12px;color:#555;margin-top:8px}
    button{cursor:pointer}
    .btn{padding:10px 14px;border:1px solid var(--border);border-radius:10px;background:var(--accent);cursor:pointer;color:var(--white);transition:filter .2s ease,transform .2s ease,box-shadow .2s ease}
    .btn-secondary{background:var(--panel);color:var(--text)}
    .btn-cta{background:#e23b2e;color:#fff;border-color:#e23b2e}
    .btn:hover,.btn:focus-visible{filter:brightness(.95);transform:translateY(-1px);box-shadow:0 6px 16px rgba(108,88,76,.12)}
    .btn:active{transform:translateY(0);filter:brightness(.9)}
    .btn-link{display:inline-flex;align-items:center;text-decoration:none;background:transparent;border:none;color:var(--accent-2);padding:10px 4px}
    @media (max-width: 760px){
      .wish-body{grid-template-columns:1fr}
      .wish-media{order:-1}
    }
      /* Footer */
    .site-footer{margin-top:28px;background:#fff;border-top:1px solid var(--border)}
    .site-footer .footer-inner{max-width:1200px;margin:0 auto;padding:24px 16px;display:grid;grid-template-columns:1.2fr .8fr .9fr 1.2fr;gap:24px}
    .site-footer .footer-logo{font-size:26px;font-weight:800;letter-spacing:.5px;color:var(--text);background:var(--panel);display:inline-block;padding:8px 14px;border-radius:10px}
    .footer-title{font-weight:700;margin-bottom:10px}
    .footer-col a{display:block;color:var(--text);text-decoration:none;margin:8px 0}
    .footer-col a:hover{text-decoration:underline}
    .footer-note{font-size:13px;color:var(--accent-2);line-height:1.4}
    .footer-apps{display:flex;gap:10px;flex-wrap:wrap;margin-top:10px}
    .app-badge{background:#111;color:#fff;padding:8px 12px;border-radius:8px;font-size:12px}
    .app-badge{display:inline-flex;align-items:center;gap:8px}
    .app-icon{display:inline-flex;width:20px;height:20px;align-items:center;justify-content:center;background:#fff;color:#111;border-radius:4px}.app-icon svg{width:14px;height:14px;display:block}.app-icon path,.app-icon circle,.app-icon rect,.app-icon polygon{fill:currentColor;stroke:none}
    .footer-form{display:flex;flex-direction:column;gap:10px;margin-top:10px}
    .footer-form input{padding:10px 12px;border:1px solid #222;border-radius:8px;background:#fff;color:#111}
    .footer-form button{padding:10px 12px;border:0;border-radius:8px;background:#111;color:#fff;cursor:pointer}
    .footer-social{display:flex;gap:10px;margin-top:8px;flex-wrap:wrap}
    .social-pill{width:66px;height:66px;border:1px solid var(--border);border-radius:50%;display:grid;place-items:center;color:var(--text);text-decoration:none;background:var(--white)}
    .social-pill svg{width:36px;height:36px;display:block;transform:translateY(12px)}
    .social-pill svg path,.social-pill svg circle,.social-pill svg rect{stroke:currentColor;fill:none;stroke-width:2;stroke-linecap:round;stroke-linejoin:round}
    .footer-follow-title{margin-top:14px}
    .footer-bottom{border-top:1px solid var(--border);padding:12px 16px;text-align:center;font-size:12px;color:var(--accent-2)}
    @media (max-width: 900px){
      .site-footer .footer-inner{grid-template-columns:1fr 1fr}
    }
    @media (max-width: 640px){
      .site-footer .footer-inner{grid-template-columns:1fr}
    }
        /* Simple header */
    .topbar{background:#111;color:#fff;text-align:center;font-size:12px;letter-spacing:.3px;padding:8px 16px}
    header.top{position:sticky;top:0;z-index:60;background:var(--panel);border-bottom:1px solid var(--border);padding:0;display:block}
    .top .mainbar{max-width:1200px;margin:0 auto;display:flex;align-items:center;justify-content:space-between;gap:24px;padding:12px 16px}
    .top .brand{text-decoration:none;color:var(--accent);font-weight:700;letter-spacing:2px;text-transform:uppercase;order:0}
    .top .nav{display:flex;align-items:center;justify-content:center;gap:24px;flex:1 1 auto;flex-wrap:wrap;order:1}
    .top .nav a,.top .nav button{border:none;background:transparent;color:var(--text);padding:6px 0;font-weight:600;letter-spacing:.08em;text-transform:uppercase;font-family:inherit}
    .top .nav .icon{display:none}
    .top .nav-right{display:flex;align-items:center;gap:10px;order:2;margin-left:auto}
    .top .icon-only{width:34px;height:34px;border:1px solid var(--border);border-radius:50%;background:transparent;display:inline-flex;align-items:center;justify-content:center;color:var(--text);padding:0}
    .top .icon-only svg{width:18px;height:18px}
    .top .icon-only svg path,.top .icon-only svg circle,.top .icon-only svg rect{stroke:var(--border);fill:none;stroke-width:2;stroke-linecap:round;stroke-linejoin:round}
    #nav-user{font-size:12px;letter-spacing:.06em;text-transform:uppercase;color:var(--accent-2)}
    .top .nav-right .pill{border:none;background:transparent;padding:0}
    @media (max-width:900px){
      .top .mainbar{flex-wrap:wrap;justify-content:center}
      .top .brand{flex-basis:100%;text-align:center}
      .top .nav{justify-content:center;order:2;flex-basis:100%}
      .top .nav-right{order:1;width:100%;justify-content:center;margin-left:0}
    }  </style>
</head>
<body>
  <div class="topbar">Enjoy Free Local Shipping with a minimum spend of PHP 1,499</div>
  <header class="top">
    <div class="mainbar">
    <div class="brand">CACAO CENTRAL</div>
      <div class="nav">
      <a href="/">
        <svg class="icon" viewBox="0 0 24 24" aria-hidden="true">
          <path d="M3 11.5l9-7 9 7"></path>
          <path d="M5 10.5V20h5v-5h4v5h5V10.5"></path>
        </svg>
        Home
      </a>
      <a href="/cart.html">
        <svg class="icon" viewBox="0 0 24 24" aria-hidden="true">
          <path d="M3 5h2l2.5 11h9l2-7H7.5"></path>
          <circle cx="10" cy="19" r="1.5"></circle>
          <circle cx="17" cy="19" r="1.5"></circle>
        </svg>
        Cart (<span id="nav-cart-count">0</span>)
      </a>
      <a href="/wishlist.html">
        <svg class="icon" viewBox="0 0 24 24" aria-hidden="true">
          <path d="M12 20s-7-4.4-9-8.2C1.7 9 3.2 6.5 6 6.5c1.8 0 3.1 1 4 2.3 0.9-1.3 2.2-2.3 4-2.3 2.8 0 4.3 2.5 3 5.3C19 15.6 12 20 12 20z"></path>
        </svg>
        Wishlist (<span id="nav-wishlist-count">0</span>)
      </a>
      <a href="/orders.html">
        <svg class="icon" viewBox="0 0 24 24" aria-hidden="true">
          <rect x="4" y="6" width="16" height="12" rx="2"></rect>
          <path d="M4 10h16"></path>
        </svg>
        Orders
      </a>
      <a href="/about.html">About</a>
      <a href="/admin.html" id="nav-admin" style="display:none">Admin</a>
    </div>
      <div class="nav-right">
        <a href="/login.html" id="nav-profile" class="icon-only" aria-label="Profile"><svg viewBox="0 0 24 24" aria-hidden="true"><circle cx="12" cy="8" r="4"></circle><path d="M4 20c1.5-4 5-6 8-6s6.5 2 8 6"></path></svg></a>
        <button id="nav-logout" class="icon-only" style="display:none" aria-label="Logout"><svg viewBox="0 0 24 24" aria-hidden="true"><path d="M10 5H5v14h5"></path><path d="M14 8l4 4-4 4"></path><path d="M18 12H9"></path></svg></button>
        <div id="nav-user" class="pill">Not logged in</div>
      </div>
      </div>
  </header>

  <div class="page">
    <h2>Wishlist</h2>
    <div id="status">Loading...</div>
    <div id="wrap" class="wishlist-grid"></div>
    <div id="compare-panel" class="compare-panel" style="display:none"></div>
  </div>

  <script src="/site.js"></script>
  <script>
    async function load(){
      const me = await requireLogin();
      if(!me) return;

      const r = await fetch("/api/wishlist");
      const j = await r.json();
      if(!j.ok){ document.getElementById("status").textContent = "Error: " + (j.error||"failed"); return; }

      const items = j.data || [];
      if(!items.length){
        document.getElementById("status").textContent = "Wishlist is empty.";
        return;
      }

      document.getElementById("status").textContent = "";
      const wrap = document.getElementById("wrap");
      wrap.innerHTML = "";

      const itemsById = new Map((items || []).map(it => [String(it.id), it]));
      const selected = new Map();

      const renderCompare = () => {
        const panel = document.getElementById("compare-panel");
        if(!panel) return;
        const list = Array.from(selected.values());
        if(list.length === 0){
          panel.style.display = "none";
          panel.innerHTML = "";
          return;
        }
        panel.style.display = "block";
        const note = list.length < 2 ? "<div class=\"compare-note\">Select at least 2 items to compare.</div>" : "";
        const card = (it) => `
          <div class=\"compare-card\">
            <div class=\"compare-name\">${it.name || "-"}</div>
            <div class=\"compare-price\">${formatPHP(it.price)}</div>
            <div class=\"compare-meta\">
              <span>Stock: ${it.stock !== undefined && it.stock !== null ? it.stock : "-"}</span>
              <span>${it.category || "Uncategorized"}</span>
            </div>
            <div class=\"compare-desc\">${it.description || "-"}</div>
          </div>
        `;
        panel.innerHTML = `
          <div class=\"compare-title\">Comparison</div>
          ${note}
          <div class=\"compare-grid\">
            ${list.map(card).join("")}
          </div>
        `;
      };

      items.forEach(it => {
        const card = document.createElement("div");
        card.className = "wish-card";
        const img = it.image_url
          ? `<img src="${it.image_url}" alt="${it.name}">`
          : `<div style="color:#a98467;font-size:12px;">No image</div>`;
        card.innerHTML = `
          <div class="wish-body">
            <div class="wish-info">
              <div class="wish-title">${it.name}</div>
              <div class="wish-meta">
                <span>Code: CACAO-${it.id}</span>
                <span class="wish-stars">&#9733;&#9733;&#9733;&#9733;&#9733;</span>
                <span class="wish-score">0.0 (0)</span>
              </div>
              <div class="wish-desc">${it.description || ""}</div>
              <div class="wish-price">${formatPHP(it.price)}</div>
              <div class="wish-actions">
                <a class="btn-link" href="/product.html?id=${it.id}">Learn more &rarr;</a>
                <button class="btn btn-cta" data-add="${it.id}">Buy now</button>
                <button class="btn btn-secondary" data-remove="${it.id}">Remove</button>
              </div>
            </div>
            <div class="wish-media">${img}</div>
          </div>
          <label class="wish-compare"><input type="checkbox" data-id="${it.id}" /> Compare</label>
        `;
        wrap.appendChild(card);
      });

      wrap.querySelectorAll("button[data-add]").forEach(btn => {
        btn.addEventListener("click", async ()=>{
          const pid = Number(btn.getAttribute("data-add"));
          const r2 = await fetch("/api/cart/add", {
            method:"POST",
            headers:{"Content-Type":"application/json"},
            body: JSON.stringify({ product_id: pid, qty: 1 })
          });
          const j2 = await r2.json();
          alert(j2.ok ? "Added to cart!" : ("Error: " + (j2.error || "failed")));
          updateCartBadge();
        });
      });

      wrap.querySelectorAll("button[data-remove]").forEach(btn => {
        btn.addEventListener("click", async ()=>{
          const pid = Number(btn.getAttribute("data-remove"));
          const r2 = await fetch("/api/wishlist/remove", {
            method:"POST",
            headers:{"Content-Type":"application/json"},
            body: JSON.stringify({ product_id: pid })
          });
          const j2 = await r2.json();
          if(!j2.ok){ alert("Error: " + (j2.error || "failed")); return; }
          load();
        });
      });

      wrap.querySelectorAll(".wish-compare input[type='checkbox']").forEach(cb => {
        cb.addEventListener("change", () => {
          const id = cb.getAttribute("data-id");
          const item = itemsById.get(String(id));
          if(!item) return;
          if(cb.checked){
            if(selected.size >= 3){
              cb.checked = false;
              alert("You can compare up to 3 items only.");
              return;
            }
            selected.set(String(id), item);
          } else {
            selected.delete(String(id));
          }
          renderCompare();
        });
      });
    }

    load();
  </script>
  <footer class="site-footer">
    <div class="footer-inner">
      <div class="footer-brand">
        <div class="footer-logo">CACAO CENTRAL</div>
        <p class="footer-note">Premium cacao goods crafted in the Philippines.</p>
        <div class="footer-apps">
          <div class="app-badge app-apple"><span class="app-icon" aria-hidden="true"><svg viewBox="0 0 24 24"><path d="M12 7c-3 0-5 2.2-5 5.2 0 3.4 2.1 6.3 5 6.3s5-2.9 5-6.3C17 9.2 15 7 12 7z"/><path d="M12.4 5.2c.9-1.2 2-1.7 3.1-1.8-.1 1.2-.8 2.3-1.6 2.9-.7.6-1.8 1-2.8.9-.1-1.1.4-1.6 1.3-2z"/></svg></span>App Store</div>
          <div class="app-badge app-play"><span class="app-icon" aria-hidden="true"><svg viewBox="0 0 24 24"><polygon points="6,4 20,12 6,20"/></svg></span>Google Play</div>
        </div>
      </div>
      <div class="footer-col">
        <div class="footer-title">Explore</div>
        <a href="/">Home</a>
        <a href="/faq.html">FAQ</a>
        <a href="/policy.html">Privacy Policy</a>
        <a href="/policy.html">Terms of Use</a>
      </div>
      <div class="footer-col">
        <div class="footer-title">Customer Care</div>
        <a href="/contact.html">Contact Us</a>
        <a href="/orders.html">Track Order</a>
        <a href="/faq.html">Help Center</a>
      </div>
      <div class="footer-col">
        <div class="footer-title">Subscribe &amp; Get 10% Off Your First Order</div>
        <div class="footer-note">Get exclusive access to new drops, promos, and more.</div>
        <form class="footer-form" onsubmit="event.preventDefault(); alert('Thanks for subscribing!')">
          <input type="email" placeholder="Your email" required>
          <button type="submit">Sign Up</button>
        </form>
        <div class="footer-title footer-follow-title">Follow Us</div>
                <div class="footer-social">
          <a class="social-pill" href="#" aria-label="Instagram">
            <svg viewBox="0 0 24 24" aria-hidden="true">
              <rect x="4" y="4" width="16" height="16" rx="4"></rect>
              <circle cx="12" cy="12" r="4"></circle>
              <circle cx="17" cy="7" r="1"></circle>
            </svg>
          </a>
          <a class="social-pill" href="#" aria-label="Facebook">
            <svg viewBox="0 0 24 24" aria-hidden="true">
              <path d="M14 9h3V6h-3c-2.2 0-4 1.8-4 4v2H8v3h2v5h3v-5h3l1-3h-4v-2c0-.6.4-1 1-1z"></path>
            </svg>
          </a>
          <a class="social-pill" href="#" aria-label="YouTube">
            <svg viewBox="0 0 24 24" aria-hidden="true">
              <rect x="3" y="6" width="18" height="12" rx="3"></rect>
              <path d="M10 9l5 3-5 3z"></path>
            </svg>
          </a>
          <a class="social-pill" href="#" aria-label="TikTok">
            <svg viewBox="0 0 24 24" aria-hidden="true">
              <path d="M14 3c1.2 1.7 2.7 2.6 5 2.7v3c-1.6 0-3-.4-4.5-1.2V14a5 5 0 1 1-5-5"></path>
            </svg>
          </a>
        </div>
      </div>
    </div>
    <div class="footer-bottom">&copy; 2026 CACAO CENTRAL. All rights reserved.</div>
  </footer></body>
</html>












































